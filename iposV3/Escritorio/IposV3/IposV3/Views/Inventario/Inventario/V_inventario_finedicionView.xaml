<UserControl
       x:Class="IposV3.Views.V_inventario_finedicionView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:cal="http://www.caliburnproject.org"
        xmlns:Syncfusion="http://schemas.syncfusion.com/wpf" 
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        xmlns:cbind="clr-namespace:CalcBinding;assembly=CalcBinding"
        xmlns:local="clr-namespace:IposV3"
            xmlns:localCommon="clr-namespace:UICommon;assembly=UICommon"
        xmlns:localCont="clr-namespace:Controls;assembly=UICommon"
        xmlns:localConv="clr-namespace:Converters;assembly=UICommon"
        xmlns:ac="clr-namespace:AdornedControl;assembly=AdornedControl"
        mc:Ignorable="d"
        Height="{Binding Source={x:Static SystemParameters.PrimaryScreenHeight}, Converter={localConv:WindowSizeConverter}, ConverterParameter='0.75'}" 
        Width="{Binding Source={x:Static SystemParameters.PrimaryScreenWidth}, Converter={localConv:WindowSizeConverter}, ConverterParameter='0.75'}"
        >

    <UserControl.Resources>

        <Style x:Key="customCellStyle" TargetType="Syncfusion:VirtualizingCellsControl">
            <Setter Property="cal:Message.Attach" Value="[Event MouseDoubleClick] = [Action SelectItemByCell($dataContext)]"/>
        </Style>

        <Style x:Key="filterControlStyle" TargetType="Syncfusion:GridFilterControl">
            <Setter Property="FilterMode" Value="AdvancedFilter" />
        </Style>


    </UserControl.Resources>


    <ScrollViewer  HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Auto" Margin="20,20,20,20">
        <WrapPanel Name="MainPanel"  HorizontalAlignment="Stretch"  VerticalAlignment="Top"  >
            <StackPanel MinWidth="110" Width="{Binding ElementName=MainPanel, Path=ActualWidth, Converter={localConv:MathConverter}, ConverterParameter=x}"  Height="5"  >
                <localCont:MessageBoxV2 MessageToUser="{Binding MessageToUser}"  Width="10"  HorizontalAlignment="Right"/>
            </StackPanel>

            <ac:AdornedControl  IsAdornerVisible="{Binding IsBusy}">
                <ac:AdornedControl.AdornerContent>
                    <localCont:LoadingWait></localCont:LoadingWait>
                </ac:AdornedControl.AdornerContent>
                <WrapPanel  HorizontalAlignment="Stretch"  VerticalAlignment="Top"  IsEnabled="{cbind:Binding !IsBusyMovtoList}">


                    <WrapPanel Width="{Binding ElementName=MainPanel, Path=ActualWidth, Converter={localConv:MathConverter}, ConverterParameter=12.5*x/12.5}">

                        <Button  x:Name="Back" Style="{StaticResource MaterialDesignIconButton}">
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="ArrowLeft"/>
                            </StackPanel>
                        </Button>
                        <TextBlock Style="{StaticResource MaterialDesignHeadline5TextBlock}">Paso 3 : Ajustes finales de de inventario</TextBlock>
                    </WrapPanel>


                    <WrapPanel Width="{Binding ElementName=MainPanel, Path=ActualWidth, Converter={localConv:MathConverter}, ConverterParameter=12*x/12.5}">
                        <StackPanel HorizontalAlignment="Stretch" Margin="0,0,0,20">
                            <TextBlock Style="{StaticResource MaterialDesignHeadline6TextBlock}" FontWeight="Medium"  HorizontalAlignment="Stretch"  VerticalAlignment="Top"></TextBlock>
                            <Border BorderThickness="0,2,0,0"  BorderBrush="LightBlue"  >
                                <WrapPanel Margin="0,10,0,0">

                                    <StackPanel MinWidth="110" Width="{Binding ElementName=MainPanel, Path=ActualWidth, Converter={localConv:MathConverter}, ConverterParameter=3*x/12.5}"  Height="65"  >
                                        <Label Style="{DynamicResource LabelFieldFormTemplate}" Margin="10,0,10,0"  Content="_____________" />
                                    </StackPanel>

                                </WrapPanel>
                            </Border>
                        </StackPanel>
                    </WrapPanel>

                    <WrapPanel HorizontalAlignment="Center" Orientation="Horizontal" Margin="6" MinWidth="110" Width="{Binding ElementName=MainPanel, Path=ActualWidth, Converter={localConv:MathConverter}, ConverterParameter=x}">
                        <Rectangle  Width="80"/>
                        <Button MinWidth="120" Margin="6" Padding="6"
                            x:Name="FinEdicion" Content="Fin de edicion" IsEnabled="{cbind:Binding HabilitarFinEdicion}" Foreground="WhiteSmoke"/>
                        <Rectangle  Width="80"/>
                        <Button MinWidth="120" Margin="6" Padding="6"
                            x:Name="Completar" Content="Completar" IsEnabled="{cbind:Binding HabilitarCompletar}" Foreground="WhiteSmoke"/>
                        
                        <WrapPanel Visibility="{cbind:Binding HabilitarCompletar}">
                            <Rectangle  Width="80"/>
                            <Button MinWidth="120" Margin="6" Padding="6"
                            x:Name="ImprimirDiferencias"
                            Content="Imprimir Diferencias"  Background="LightGray"/>
                        </WrapPanel>
                        
                        <WrapPanel Visibility="{cbind:Binding !HabilitarCompletar}">

                            <Rectangle  Width="80" />
                            <Button MinWidth="120" Margin="6" Padding="6"
                            x:Name="ImprimirInventarioHecho"
                            Content="Imprimir"  Background="LightGray"/>
                        </WrapPanel>

                        <Rectangle  Width="80"/>
                        <Button MinWidth="120" Margin="6" Padding="6"
                            x:Name="EliminarInventario"
                            Content="Eliminar Inventario" IsEnabled="{cbind:Binding HabilitarEliminar}" Background="RosyBrown" />

                    </WrapPanel>




                    <StackPanel MinWidth="110" Width="{Binding ElementName=MainPanel, Path=ActualWidth, Converter={localConv:MathConverter}, ConverterParameter=x}" >

                        <ac:AdornedControl IsAdornerVisible="{Binding IsBusyMovtoList}"
		        >
                            <ac:AdornedControl.AdornerContent>
                                <localCont:LoadingWait></localCont:LoadingWait>
                            </ac:AdornedControl.AdornerContent>

                            <Syncfusion:SfDataGrid x:Name="SfTableDataGridView" 
                                ItemsSource="{Binding MovtoItems}" 
                                RowStyle="{StaticResource customCellStyle}"
                                AllowFiltering="True"
                                FilterPopupStyle="{StaticResource filterControlStyle}"
                                Margin="2,2,2,2"  AutoGenerateColumns="False" Background="#FFFFFFFF" IsReadOnly="True"  RowHeight="35" HorizontalAlignment="Left"   
                                   MinWidth="100" Width="{Binding ElementName=MainPanel, Path=ActualWidth, Converter={localConv:MathConverter}, ConverterParameter=x}"
                                Height="{Binding ElementName=MainPanel, Path=ActualHeight, Converter={localConv:MathConverter}, ConverterParameter=20*x/60}" MinHeight="150"  >
                                <Syncfusion:SfDataGrid.Columns>






                                    <Syncfusion:GridTextColumn  MappingName="Productoclave" HeaderText="Prod. clave" ColumnSizer="SizeToHeader"/>

                                    <Syncfusion:GridTextColumn  MappingName="Productonombre" HeaderText="Prod. nombre" ColumnSizer="SizeToHeader"/>

                                    <Syncfusion:GridTextColumn  MappingName="Productodescripcion" HeaderText="Prod. desc." ColumnSizer="SizeToHeader"/>

                                    <Syncfusion:GridTextColumn  MappingName="CantidadTeorica" HeaderText="Cant. teorica" ColumnSizer="SizeToHeader"/>

                                    <Syncfusion:GridTextColumn  MappingName="CantidadSurtida" HeaderText="Cant. fisica" ColumnSizer="SizeToHeader"/>

                                    <Syncfusion:GridTextColumn  MappingName="CantidadDiferencia" HeaderText="Dif." ColumnSizer="SizeToHeader"/>


                                    <Syncfusion:GridTextColumn  MappingName="Lote" HeaderText="Producto lote" ColumnSizer="SizeToHeader"/>

                                    <Syncfusion:GridDateTimeColumn  MappingName="Fechavence" HeaderText="Fecha vence" ColumnSizer="SizeToHeader" Pattern="CustomPattern" CustomPattern="dd/MM/yy"/>

                                    <Syncfusion:GridTextColumn  MappingName="Pzacaja" HeaderText="Pza caja" ColumnSizer="SizeToHeader"/>

                                    <Syncfusion:GridTextColumn  MappingName="Cajas" HeaderText="Cajas" ColumnSizer="SizeToHeader"/>

                                    <Syncfusion:GridTextColumn  MappingName="Piezas" HeaderText="Piezas" ColumnSizer="SizeToHeader"/>

                                    <Syncfusion:GridTextColumn  MappingName="Productotexto1" HeaderText="Texto1" ColumnSizer="SizeToHeader"/>

                                    <Syncfusion:GridTextColumn  MappingName="Productotexto2" HeaderText="Texto2" ColumnSizer="SizeToHeader"/>

                                    <Syncfusion:GridTextColumn  MappingName="Productotexto3" HeaderText="Texto3" ColumnSizer="SizeToHeader"/>

                                    <Syncfusion:GridTextColumn  MappingName="Productotexto4" HeaderText="Texto4" ColumnSizer="SizeToHeader"/>

                                    <Syncfusion:GridTextColumn  MappingName="Productotexto5" HeaderText="Texto5" ColumnSizer="SizeToHeader"/>

                                    <Syncfusion:GridTextColumn  MappingName="Productotexto6" HeaderText="Texto6" ColumnSizer="SizeToHeader"/>

                                    <Syncfusion:GridTextColumn  MappingName="Productonumero1" HeaderText="Numero1" ColumnSizer="SizeToHeader"/>

                                    <Syncfusion:GridTextColumn  MappingName="Productonumero2" HeaderText="Numero2" ColumnSizer="SizeToHeader"/>

                                    <Syncfusion:GridTextColumn  MappingName="Productonumero3" HeaderText="Numero3" ColumnSizer="SizeToHeader"/>

                                    <Syncfusion:GridTextColumn  MappingName="Productonumero4" HeaderText="Numero4" ColumnSizer="SizeToHeader"/>



                                </Syncfusion:SfDataGrid.Columns>
                            </Syncfusion:SfDataGrid>
                        </ac:AdornedControl>


                    </StackPanel>





                </WrapPanel>
            </ac:AdornedControl>

        </WrapPanel>
    </ScrollViewer>
</UserControl>

