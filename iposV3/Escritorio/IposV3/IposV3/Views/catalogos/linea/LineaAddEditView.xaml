<UserControl x:Class="IposV3.Views.LineaAddEditView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:cal="http://www.caliburnproject.org"
        xmlns:Syncfusion="http://schemas.syncfusion.com/wpf" 
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        xmlns:cbind="clr-namespace:CalcBinding;assembly=CalcBinding"
        xmlns:local="clr-namespace:IposV3"
            xmlns:localCommon="clr-namespace:UICommon;assembly=UICommon"
        xmlns:localCont="clr-namespace:Controls;assembly=UICommon"
        xmlns:localConv="clr-namespace:Converters;assembly=UICommon" 
        xmlns:ac="clr-namespace:AdornedControl;assembly=AdornedControl"
             xmlns:viewmodels="clr-namespace:IposV3.ViewModels" 
             mc:Ignorable="d"  
             MinHeight="400" MaxWidth="1500"
        >


    <ScrollViewer  HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Auto" Margin="20,20,20,20"  IsEnabled="{cbind:Binding Path=!IsBusy}" Opacity="{Binding Opacity}">
        <WrapPanel Name="MainPanel"  HorizontalAlignment="Stretch"  VerticalAlignment="Top"  localConv:EnterKeyTraversal.IsEnabled="True"  >
            <StackPanel MinWidth="110" Width="{Binding ElementName=MainPanel, Path=ActualWidth, Converter={localConv:MathConverter}, ConverterParameter=x}"  Height="5"  >
                <localCont:MessageBoxV2 MessageToUser="{Binding MessageToUser}"  Width="10"  HorizontalAlignment="Right"/>
            </StackPanel>

            <ac:AdornedControl  IsAdornerVisible="{Binding IsBusy}">
                <ac:AdornedControl.AdornerContent>
                    <localCont:LoadingWait></localCont:LoadingWait>
                </ac:AdornedControl.AdornerContent>

                <WrapPanel  HorizontalAlignment="Stretch"  VerticalAlignment="Top"  IsEnabled="{cbind:Binding Path=!IsBusy}">


                    <WrapPanel Width="{Binding ElementName=MainPanel, Path=ActualWidth, Converter={localConv:MathConverter}, ConverterParameter=12.5*x/12.5}">

                        <Button  x:Name="Back" Style="{StaticResource MaterialDesignIconButton}">
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="ArrowLeft"/>
                            </StackPanel>
                        </Button>
                        <TextBlock Style="{StaticResource MaterialDesignHeadline5TextBlock}">Linea</TextBlock>
                    </WrapPanel>


                    <WrapPanel Width="{Binding ElementName=MainPanel, Path=ActualWidth, Converter={localConv:MathConverter}, ConverterParameter=12.5*x/12.5}">
                        <StackPanel HorizontalAlignment="Stretch" Margin="0,0,0,20">
                            <TextBlock Style="{StaticResource MaterialDesignHeadlineGroupBlock}" FontWeight="Medium"  HorizontalAlignment="Stretch"  VerticalAlignment="Top">General</TextBlock>
                            <Border BorderThickness="0,2,0,0" BorderBrush="LightBlue"  >
                                <WrapPanel Margin="0,10,0,0">


                                    <StackPanel MinWidth="110" Width="{Binding ElementName=MainPanel, Path=ActualWidth, Converter={localConv:MathConverter}, ConverterParameter=2*x/12.5}"  Height="65"  >
                                        <Label Style="{DynamicResource LabelFieldFormTemplate}" Margin="10,0,10,0"  Content="Activo*" HorizontalAlignment="Center" />
                                        <CheckBox x:Name="Activo"  IsChecked="{Binding Linea.Activo, Converter={localConv:BooleanConverter}}" HorizontalAlignment="Center" Margin="10,0,10,0"  VerticalAlignment="Top"  IsEnabled="{cbind:Binding !BIsReadOnly}" />
                                        <TextBlock Style="{DynamicResource TextErrorStyleTemplate}"  Text="{Binding (Validation.Errors), Converter={localConv:ValidationErrorConverter}, ConverterParameter=0, ElementName=Activo}"  Margin="0,0,0,0"/>
                                    </StackPanel>

                                    <StackPanel MinWidth="110" Width="{Binding ElementName=MainPanel, Path=ActualWidth, Converter={localConv:MathConverter}, ConverterParameter=3*x/12.5}"  Height="65"  >
                                        <Label Style="{DynamicResource LabelFieldFormTemplate}" Margin="10,0,10,0"  Content="Clave*" />
                                        <TextBox x:Name="Clave" Text="{Binding Linea.Clave}" Margin="10,0,10,0"  IsReadOnly="{Binding BIsReadOnly}"  />
                                        <TextBlock Style="{DynamicResource TextErrorStyleTemplate}"  Text="{Binding (Validation.Errors), Converter={localConv:ValidationErrorConverter}, ConverterParameter=0, ElementName=Clave}"  Margin="0,0,0,0"/>
                                    </StackPanel>

                                    <StackPanel MinWidth="110" Width="{Binding ElementName=MainPanel, Path=ActualWidth, Converter={localConv:MathConverter}, ConverterParameter=4*x/12.5}"  Height="65"  >
                                        <Label Style="{DynamicResource LabelFieldFormTemplate}" Margin="10,0,10,0"  Content="Nombre*" />
                                        <TextBox x:Name="Nombre" Text="{Binding Linea.Nombre}" Margin="10,0,10,0"  IsReadOnly="{Binding BIsReadOnly}"  />
                                        <TextBlock Style="{DynamicResource TextErrorStyleTemplate}"  Text="{Binding (Validation.Errors), Converter={localConv:ValidationErrorConverter}, ConverterParameter=0, ElementName=Nombre}"  Margin="0,0,0,0"/>
                                    </StackPanel>


                                    <StackPanel MinWidth="110" Width="{Binding ElementName=MainPanel, Path=ActualWidth, Converter={localConv:MathConverter}, ConverterParameter=2*x/12.5}"  Height="65"  >
                                        <Label Style="{DynamicResource LabelFieldFormTemplate}" Margin="10,0,10,0"  Content="Acumula promocion*" HorizontalAlignment="Center" />
                                        <CheckBox x:Name="Acumulapromocion"  IsChecked="{Binding Linea.Acumulapromocion, Converter={localConv:BooleanConverter}}" HorizontalAlignment="Center" Margin="10,0,10,0"  VerticalAlignment="Top"  IsEnabled="{cbind:Binding !BIsReadOnly}" />
                                        <TextBlock Style="{DynamicResource TextErrorStyleTemplate}"  Text="{Binding (Validation.Errors), Converter={localConv:ValidationErrorConverter}, ConverterParameter=0,  ElementName=Acumulapromocion}"  Margin="0,0,0,0"/>
                                    </StackPanel>

                                    <StackPanel MinWidth="110" Width="{Binding ElementName=MainPanel, Path=ActualWidth, Converter={localConv:MathConverter}, ConverterParameter=2*x/12.5}"  Height="65"  
                                                Visibility="{Binding MostrarAplicaMayoreoPorLinea, Converter={localConv:FocusVisibilityConverter}}">
                                        <Label Style="{DynamicResource LabelFieldFormTemplate}" Margin="10,0,10,0"  Content="Aplica mayoreo x linea*" HorizontalAlignment="Center" />
                                        <CheckBox x:Name="Aplicamayoreoxlinea"  IsChecked="{Binding Linea.Aplicamayoreoxlinea, Converter={localConv:BooleanConverter}}" HorizontalAlignment="Center" Margin="10,0,10,0"  VerticalAlignment="Top"  IsEnabled="{cbind:Binding !BIsReadOnly}" />
                                        <TextBlock Style="{DynamicResource TextErrorStyleTemplate}"  Text="{Binding (Validation.Errors), Converter={localConv:ValidationErrorConverter}, ConverterParameter=0,  ElementName=Aplicamayoreoxlinea}"  Margin="0,0,0,0"/>
                                    </StackPanel>


                                    <StackPanel MinWidth="110" Width="{Binding ElementName=MainPanel, Path=ActualWidth, Converter={localConv:MathConverter}, ConverterParameter=3*x/12.5}"  Height="65"  >
                                        <Label Style="{DynamicResource LabelFieldFormTemplate}" Margin="10,0,10,0"  Content="Descuento vale" />
                                        <Syncfusion:DoubleTextBox x:Name="Descuentovale" HorizontalAlignment="Stretch"  Margin="10,0,10,0" NumberGroupSeparator="," NumberDecimalDigits="2" NumberDecimalSeparator="." TextWrapping="Wrap" Text="DoubleTextBox" Value="{Binding Linea.Descuentovale}" VerticalAlignment="Top"  IsScrollingOnCircle="False" IsReadOnly="{Binding BIsReadOnly}" />
                                        <TextBlock Style="{DynamicResource TextErrorStyleTemplate}"  Text="{Binding (Validation.Errors), Converter={localConv:ValidationErrorConverter}, ConverterParameter=0,  ElementName=Descuentovale}"  Margin="0,0,0,0"/>
                                    </StackPanel>


                                    <StackPanel MinWidth="110" Width="{Binding ElementName=MainPanel, Path=ActualWidth, Converter={localConv:MathConverter}, ConverterParameter=2*x/12.5}"  Height="65"  >
                                        <Label Style="{DynamicResource LabelFieldFormTemplate}" Margin="10,0,10,0"  Content="Tipo recarga" />
                                        <ComboBox  x:Name="Tiporecarga" 
			                                        ItemsSource="{Binding Catalogs[Tiporecarga]}"
                                                    SelectedValuePath="Clave"
                                                    SelectedValue="{Binding Linea.Tiporecarga}"
                                                    DisplayMemberPath="Nombre"
 			                                        IsReadOnly="{Binding BIsReadOnly}" />
                                        <TextBlock Style="{DynamicResource TextErrorStyleTemplate}"  Text="{Binding (Validation.Errors), Converter={localConv:ValidationErrorConverter}, ConverterParameter=0, ElementName=Tiporecarga}"  Margin="0,0,0,0"/>
                                    </StackPanel>

                                    <StackPanel MinWidth="110" Width="{Binding ElementName=MainPanel, Path=ActualWidth, Converter={localConv:MathConverter}, ConverterParameter=2*x/12.5}"  Height="65"  >
                                        <Label Style="{DynamicResource LabelFieldFormTemplate}" Margin="10,0,10,0"  Content="Grupo impuesto" />
                                        <TextBox x:Name="Gpoimp" Text="{Binding Linea.Gpoimp}" Margin="10,0,10,0"  IsReadOnly="{Binding BIsReadOnly}"  />
                                        <TextBlock Style="{DynamicResource TextErrorStyleTemplate}"  Text="{Binding (Validation.Errors), Converter={localConv:ValidationErrorConverter}, ConverterParameter=0,  ElementName=Gpoimp}"  Margin="0,0,0,0"/>
                                    </StackPanel>



                                </WrapPanel>
                            </Border>
                        </StackPanel>
                    </WrapPanel>

                    <WrapPanel HorizontalAlignment="Center" Orientation="Horizontal" Margin="6" MinWidth="110" Width="{Binding ElementName=MainPanel, Path=ActualWidth, Converter={localConv:MathConverter}, ConverterParameter=x}">
                        <Rectangle  Width="120"/>
                        <Rectangle  Width="120"/>
                        <Button MinWidth="120" Margin="6" Padding="6"
                    x:Name="Accept" Content="Ok" IsEnabled="{cbind:Binding !Linea.HasErrors}" Foreground="WhiteSmoke"/>
                        <Rectangle  Width="120"/>
                        <Button MinWidth="120" Margin="6" Padding="6"
                    x:Name="Cancel"
                    Content="Cancelar" Visibility="{cbind:Binding Path=!BIsReadOnly}" Background="LightGray"/>

                    </WrapPanel>

                </WrapPanel>

            </ac:AdornedControl>
        </WrapPanel>
    </ScrollViewer>
</UserControl>
