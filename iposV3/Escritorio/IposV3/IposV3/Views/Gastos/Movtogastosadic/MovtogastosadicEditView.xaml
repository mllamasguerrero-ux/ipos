<UserControl
        x:Class="IposV3.Views.MovtogastosadicEditView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:cal="http://www.caliburnproject.org"
        xmlns:Syncfusion="http://schemas.syncfusion.com/wpf" 
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        xmlns:cbind="clr-namespace:CalcBinding;assembly=CalcBinding"
        xmlns:local="clr-namespace:IposV3"
            xmlns:localCommon="clr-namespace:UICommon;assembly=UICommon"
        xmlns:localCont="clr-namespace:Controls;assembly=UICommon"
        xmlns:localConv="clr-namespace:Converters;assembly=UICommon"
        xmlns:ac="clr-namespace:AdornedControl;assembly=AdornedControl"
        mc:Ignorable="d"  
        Height="{Binding Source={x:Static SystemParameters.PrimaryScreenHeight}, Converter={localConv:WindowSizeConverter}, ConverterParameter='0.60'}" 
        Width="{Binding Source={x:Static SystemParameters.PrimaryScreenWidth}, Converter={localConv:WindowSizeConverter}, ConverterParameter='0.60'}"
        >
    <UserControl.Resources>
        <localConv:DecimalNullableConverter x:Key="DecimalNullableConverter"/>

        <Style x:Key="customCellStyle" TargetType="Syncfusion:VirtualizingCellsControl">
            <Setter Property="cal:Message.Attach" Value="[Event MouseDoubleClick] = [Action SelectItemByCell($dataContext)]"/>
        </Style>

        <Style x:Key="filterControlStyle" TargetType="Syncfusion:GridFilterControl">
            <Setter Property="FilterMode" Value="AdvancedFilter" />
        </Style>
    </UserControl.Resources>


    <ScrollViewer   Height="{Binding Source={x:Static SystemParameters.PrimaryScreenHeight}, Converter={localConv:WindowSizeConverter}, ConverterParameter='0.73'}"
                HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Auto" Padding="20,20,20,20" Margin="0 0 0 0 "  IsEnabled="{cbind:Binding Path=!IsBusy}" Opacity="{Binding Opacity}">
        <WrapPanel Name="MainPanel"  HorizontalAlignment="Stretch"  VerticalAlignment="Top"  >
            <StackPanel MinWidth="110" Width="{Binding ElementName=MainPanel, Path=ActualWidth, Converter={localConv:MathConverter}, ConverterParameter=x}"  Height="5"  >
                <localCont:MessageBoxV2 MessageToUser="{Binding MessageToUser}"  Width="10"  HorizontalAlignment="Right"/>
            </StackPanel>



            <ac:AdornedControl  IsAdornerVisible="{Binding IsBusy}">
                <ac:AdornedControl.AdornerContent>
                    <localCont:LoadingWait></localCont:LoadingWait>
                </ac:AdornedControl.AdornerContent>
                <WrapPanel  HorizontalAlignment="Stretch"  VerticalAlignment="Top"  IsEnabled="{cbind:Binding Path=!IsBusy}">


                    <WrapPanel Width="{Binding ElementName=MainPanel, Path=ActualWidth, Converter={localConv:MathConverter}, ConverterParameter=12.5*x/12.5}">

                        <Button  x:Name="Back" Style="{StaticResource MaterialDesignIconButton}">
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="ArrowLeft"/>
                            </StackPanel>
                        </Button>
                        <TextBlock Style="{StaticResource MaterialDesignHeadline5TextBlock}">Gastos adicionales</TextBlock>
                    </WrapPanel>


                    <StackPanel VerticalAlignment="Top" HorizontalAlignment="Left">


                        <WrapPanel Width="{Binding ElementName=MainPanel, Path=ActualWidth, Converter={localConv:MathConverter}, ConverterParameter=12*x/12.5}">
                            <StackPanel HorizontalAlignment="Stretch" Margin="0,0,0,20">
                                <TextBlock Style="{StaticResource MaterialDesignHeadline6TextBlock}" FontWeight="Medium"  HorizontalAlignment="Stretch"  VerticalAlignment="Top"></TextBlock>
                                <Border BorderThickness="0,2,0,0" BorderBrush="LightBlue"  >
                                    <WrapPanel Margin="0,10,0,0">

                                        <StackPanel MinWidth="110" Width="{Binding ElementName=MainPanel, Path=ActualWidth, Converter={localConv:MathConverter}, ConverterParameter=3*x/12.5}"  Height="75"  >
                                            <Label Style="{DynamicResource LabelFieldFormTemplate}" Margin="10,0,10,0"  Content="Monto:" />
                                            <Syncfusion:DoubleTextBox x:Name="Monto" HorizontalAlignment="Stretch"  Margin="10,0,10,0" NumberGroupSeparator="," NumberDecimalDigits="2" NumberDecimalSeparator="." TextWrapping="Wrap" Text="DoubleTextBox" Value="{Binding Record.Monto, Converter={StaticResource DecimalNullableConverter}}" VerticalAlignment="Top"  IsScrollingOnCircle="False" IsReadOnly="{Binding BIsReadOnly}" />
                                            <TextBlock Style="{DynamicResource TextErrorStyleTemplate}"  Text="{Binding (Validation.Errors), Converter={localConv:ValidationErrorConverter}, ConverterParameter=0, ElementName=Monto}"  Margin="0,0,0,0"/>
                                        </StackPanel>

                                        <StackPanel MinWidth="110" Width="{Binding ElementName=MainPanel, Path=ActualWidth, Converter={localConv:MathConverter}, ConverterParameter=5*x/12.5}"  Height="75"  >
                                            <Label Style="{DynamicResource LabelFieldFormTemplate}" Margin="10,0,10,0"  Content="Gasto:" />
                                            <WrapPanel>
                                                <TextBox x:Name="GastoadicionalClave" Text="{Binding Record.GastoadicionalClave}" Margin="10,0,10,0"  HorizontalAlignment="Left" Width="50"   IsReadOnly="{Binding BIsReadOnly}" />
                                                <TextBox x:Name="GastoadicionalNombre" Text="{Binding Record.GastoadicionalNombre}" Margin="10,0,10,0"  HorizontalAlignment="Left" Width="100"  IsReadOnly="True" />
                                                <Button  x:Name="MovtogastosadicidButton" VerticalAlignment="Top" Margin="10,0,10,0" cal:Message.Attach="[Event Click] = [Action ShowPopUpSelector('GastoadicionalClave')]"  Width="24"  Height="24" Visibility="{cbind:Binding Path=!BIsReadOnly}"  Style="{StaticResource MaterialDesignIconButton}">
                                                    <StackPanel Orientation="Horizontal">
                                                        <materialDesign:PackIcon Kind="Binoculars"/>
                                                    </StackPanel>
                                                </Button>
                                            </WrapPanel>
                                            <TextBlock Style="{DynamicResource TextErrorStyleTemplate}"  Text="{Binding (Validation.Errors), Converter={localConv:ValidationErrorConverter}, ConverterParameter=0, ElementName=GastoadicionalClave}"  Margin="0,0,0,0"/>
                                        </StackPanel>
                                        <StackPanel>

                                            <Button MinWidth="120" Margin="6" Padding="6"
                                                    x:Name="AcceptItem" Content="Agregar"  Foreground="WhiteSmoke"/>
                                            <Rectangle  Width="120"/>
                                        </StackPanel>

                                    </WrapPanel>
                                </Border>
                            </StackPanel>
                        </WrapPanel>


                        <Syncfusion:SfDataGrid x:Name="GridpvgastoGridView" 
                      ItemsSource="{Binding Items}" 
                      RowStyle="{StaticResource customCellStyle}"
                       AllowFiltering="True"
                       FilterPopupStyle="{StaticResource filterControlStyle}"
                      Margin="2,2,2,2"  AutoGenerateColumns="False" Background="#FFFFFFFF" IsReadOnly="True"  RowHeight="35" HorizontalAlignment="Left"   
                                   MinWidth="100" Width="{Binding ElementName=Window1, Path=ActualWidth, Converter={localConv:MathConverter}, ConverterParameter=x}"
                       Height="{Binding ElementName=ForePanel, Path=ActualHeight, Converter={localConv:MathConverter}, ConverterParameter=42*x/60}" MinHeight="150"  >
                            <Syncfusion:SfDataGrid.Columns>

                                <Syncfusion:GridTextColumn  MappingName="Partida" HeaderText="Partida" ColumnSizer="SizeToHeader"/>

                                <Syncfusion:GridTextColumn  MappingName="GastoadicionalClave" HeaderText="Gasto clave" ColumnSizer="SizeToHeader"/>

                                <Syncfusion:GridTextColumn  MappingName="GastoadicionalNombre" HeaderText="Gasto Nombre" ColumnSizer="SizeToHeader"/>

                                <Syncfusion:GridTextColumn  MappingName="Monto" HeaderText="Total" ColumnSizer="SizeToHeader"/>


                                <Syncfusion:GridTemplateColumn  AllowFocus="False" Width="50"  >
                                    <Syncfusion:GridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <Button Width="35"  cal:Message.Attach="[Event Click]=[Deleteitem($dataContext)]" Style="{StaticResource MaterialDesignIconButton}">
                                                <StackPanel Orientation="Horizontal">
                                                    <materialDesign:PackIcon Kind="Delete"/>
                                                </StackPanel>
                                            </Button>
                                        </DataTemplate>
                                    </Syncfusion:GridTemplateColumn.CellTemplate>
                                </Syncfusion:GridTemplateColumn>

                            </Syncfusion:SfDataGrid.Columns>
                        </Syncfusion:SfDataGrid>

                    </StackPanel>


                    <WrapPanel HorizontalAlignment="Center" Orientation="Horizontal" Margin="6" MinWidth="110" Width="{Binding ElementName=MainPanel, Path=ActualWidth, Converter={localConv:MathConverter}, ConverterParameter=x}">
                        <Rectangle  Width="120"/>
                        <Rectangle  Width="120"/>
                        <Button MinWidth="120" Margin="6" Padding="6"
                    x:Name="Cancel"
                    Content="Ok" Background="LightGray"/>

                    </WrapPanel>

                </WrapPanel>
            </ac:AdornedControl>

        </WrapPanel>
    </ScrollViewer>
</UserControl>

