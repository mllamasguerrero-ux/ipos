
<UserControl x:Class="IposV3.Views.Movto_solicitud_mercanciaWFView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:cal="http://www.caliburnproject.org"
             xmlns:Syncfusion="http://schemas.syncfusion.com/wpf"
                xmlns:SfExt="clr-namespace:SyncfusionExt;assembly=UICommon"
            xmlns:local="clr-namespace:IposV3"
            xmlns:localCommon="clr-namespace:UICommon;assembly=UICommon"
            xmlns:localCont="clr-namespace:Controls;assembly=UICommon"
            xmlns:localConv="clr-namespace:Converters;assembly=UICommon"
              xmlns:cbind="clr-namespace:CalcBinding;assembly=CalcBinding"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             xmlns:ac="clr-namespace:AdornedControl;assembly=AdornedControl"
             mc:Ignorable="d"
             Name="CurrentUserControl"
            Height="{Binding Source={x:Static SystemParameters.PrimaryScreenHeight}, Converter={localConv:WindowSizeConverter}, ConverterParameter='0.75'}" 
            Width="{Binding Source={x:Static SystemParameters.PrimaryScreenWidth}, Converter={localConv:WindowSizeConverter}, ConverterParameter='0.75'}"
             >

    <UserControl.Resources>

        <Style x:Key="customCellStyle" TargetType="Syncfusion:VirtualizingCellsControl">
            <Setter Property="cal:Message.Attach" Value="[Event MouseDoubleClick] = [Action SelectItemByCell($dataContext)]"/>
        </Style>

        <Style x:Key="filterControlStyle" TargetType="Syncfusion:GridFilterControl">
            <Setter Property="FilterMode" Value="AdvancedFilter" />
        </Style>


        <Style x:Key="lightGreenCellStyle" TargetType="Syncfusion:GridCell">
            <Setter Property="Background" Value="LightGreen" />
        </Style>


    </UserControl.Resources>

    <ScrollViewer x:Name="MainScrollViewer" HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Auto" >
        <StackPanel Name="ForePanel"  HorizontalAlignment="Stretch"  VerticalAlignment="Stretch"   >
            <localCont:MessageBoxV2 MessageToUser="{Binding MessageToUser}"  Width="10"  HorizontalAlignment="Right"/>
            <ScrollViewer x:Name="ScrollViewerWrap" HorizontalAlignment="Stretch" HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Auto" 
                       Height="{Binding ElementName=ForePanel, Path=ActualHeight, Converter={localConv:MathConverter}, ConverterParameter=10*x/60}" MinHeight="50">
                <WrapPanel Name="MainPanel"  HorizontalAlignment="Stretch"  VerticalAlignment="Stretch" MinWidth="100" MinHeight="50" >
                    <WrapPanel MinWidth="150" Width="{Binding ElementName=MainPanel, Path=ActualWidth, Converter={localConv:MathConverter}, ConverterParameter=x}"    >
                        <Button  x:Name="Back" Style="{StaticResource MaterialDesignIconButton}">
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="ArrowLeft"/>
                            </StackPanel>
                        </Button>
                        <TextBlock Style="{StaticResource MaterialDesignHeadline5TextBlock}">Creacion/Edicion solicitud de mercancia</TextBlock>
                    </WrapPanel>

                    <WrapPanel  MinWidth="150" Margin="0,20,0,0" Width="{Binding ElementName=MainPanel, Path=ActualWidth, Converter={localConv:MathConverter}, ConverterParameter=4*x/12.5}"   >
                        <Label Style="{DynamicResource LabelFieldFormTemplate}" Margin="10,0,10,0"  Content="Sucursal destino" />
                        <TextBox x:Name="SucursalTClave" Text="{Binding CurrentDocto.Docto_traslado_SucursaltClave}" Margin="0,0,10,0"  HorizontalAlignment="Left" Width="50"   IsReadOnly="{Binding BIsReadOnly}" />
                        <TextBox x:Name="SucursalTNombre" Text="{Binding CurrentDocto.Docto_traslado_SucursaltNombre}" Margin="0,0,0,0"  HorizontalAlignment="Left" Width="100"  IsReadOnly="True" />

                        <Button  x:Name="SucursalTidButton" VerticalAlignment="Top" Margin="0,0,0,0" cal:Message.Attach="[Event Click] = [Action ShowPopUpSelector('Docto_traslado_SucursaltClave')]"  Width="24"  Height="24" Visibility="{cbind:Binding Path=!BIsReadOnly}"  Style="{StaticResource MaterialDesignIconButton}">
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="Binoculars"/>
                            </StackPanel>
                        </Button>
                    </WrapPanel>
                    
                </WrapPanel>
            </ScrollViewer>



            <ac:AdornedControl IsAdornerVisible="{Binding IsBusy}"
		        >
             <ac:AdornedControl.AdornerContent>
                    <localCont:LoadingWait></localCont:LoadingWait>
             </ac:AdornedControl.AdornerContent>

             <Syncfusion:SfDataGrid x:Name="SfTableDataGridView" 
                      ItemsSource="{Binding MovtoItems}" 
                      RowStyle="{StaticResource customCellStyle}"
                       AllowFiltering="True" AllowEditing="True"
                       FilterPopupStyle="{StaticResource filterControlStyle}"
                      Margin="2,2,2,2"  AutoGenerateColumns="False" Background="#FFFFFFFF"   RowHeight="35" HorizontalAlignment="Left"   
                                   MinWidth="100" Width="{Binding ElementName=MainScrollViewer, Path=ActualWidth, Converter={localConv:MathConverter}, ConverterParameter=x}"
                       Height="{Binding ElementName=ForePanel, Path=ActualHeight, Converter={localConv:MathConverter}, ConverterParameter=30*x/60}" MinHeight="150"  >
                <Syncfusion:SfDataGrid.Columns>



                        <Syncfusion:GridTextColumn  MappingName="ProductoClave" HeaderText="Producto" ColumnSizer="SizeToHeader" IsReadOnly="True"/>

                        <Syncfusion:GridTextColumn  MappingName="Descripcion1" HeaderText="Descripcion1" ColumnSizer="SizeToHeader" IsReadOnly="True"/>

                        <Syncfusion:GridTextColumn  MappingName="Cantidad" HeaderText="Cantidad" ColumnSizer="SizeToHeader" IsReadOnly="False">
                            <Syncfusion:GridTextColumn.CellStyle>
                                <Style TargetType="Syncfusion:GridCell">
                                    <Setter Property="Background" Value="LightGreen" />
                                </Style>
                            </Syncfusion:GridTextColumn.CellStyle>
                        </Syncfusion:GridTextColumn>



                        <Syncfusion:GridTextColumn  MappingName="Texto1" HeaderText="Texto1" ColumnSizer="SizeToHeader" IsReadOnly="True"/>

                        <Syncfusion:GridTextColumn  MappingName="Texto2" HeaderText="Texto2" ColumnSizer="SizeToHeader" IsReadOnly="True"/>

                        <Syncfusion:GridTextColumn  MappingName="Texto3" HeaderText="Texto3" ColumnSizer="SizeToHeader" IsReadOnly="True"/>

                        <Syncfusion:GridTextColumn  MappingName="Texto4" HeaderText="Texto4" ColumnSizer="SizeToHeader" IsReadOnly="True"/>

                        <Syncfusion:GridTextColumn  MappingName="Texto5" HeaderText="Texto5" ColumnSizer="SizeToHeader" IsReadOnly="True"/>

                        <Syncfusion:GridTextColumn  MappingName="Texto6" HeaderText="Texto6" ColumnSizer="SizeToHeader" IsReadOnly="True"/>

                        <Syncfusion:GridTextColumn  MappingName="Numero1" HeaderText="Numero1" ColumnSizer="SizeToHeader" IsReadOnly="True"/>

                        <Syncfusion:GridTextColumn  MappingName="Numero2" HeaderText="Numero2" ColumnSizer="SizeToHeader" IsReadOnly="True"/>

                        <Syncfusion:GridTextColumn  MappingName="Numero3" HeaderText="Numero3" ColumnSizer="SizeToHeader" IsReadOnly="True"/>

                        <Syncfusion:GridTextColumn  MappingName="Numero4" HeaderText="Numero4" ColumnSizer="SizeToHeader" IsReadOnly="True"/>

                        <Syncfusion:GridTextColumn  MappingName="Fecha1" HeaderText="Fecha1" ColumnSizer="SizeToHeader" IsReadOnly="True"/>

                        <Syncfusion:GridTextColumn  MappingName="Fecha2" HeaderText="Fecha2" ColumnSizer="SizeToHeader" IsReadOnly="True"/>

                </Syncfusion:SfDataGrid.Columns>
              </Syncfusion:SfDataGrid>
            </ac:AdornedControl>

            <ScrollViewer x:Name="ScrollViewerWrapFooter" HorizontalAlignment="Stretch" HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Auto" 
                       Height="{Binding ElementName=ForePanel, Path=ActualHeight, Converter={localConv:MathConverter}, ConverterParameter=18*x/60}" MinHeight="100">
                <WrapPanel Name="FooterPanel"  HorizontalAlignment="Stretch"  VerticalAlignment="Stretch" MinWidth="100" MinHeight="100" >


                    <WrapPanel Width="{Binding ElementName=MainPanel, Path=ActualWidth, Converter={localConv:MathConverter}, ConverterParameter=12.5*x/12.5}">
                        <StackPanel MinWidth="110" Width="{Binding ElementName=MainPanel, Path=ActualWidth, Converter={localConv:MathConverter}, ConverterParameter=3*x/12.5}"  Height="85"  >
                            <Label Style="{DynamicResource LabelFieldFormTemplate}" Margin="10,0,10,0"  Content="Producto" />


                            <localConv:SfTextBoxExt2 x:Name="P_productoclave"
                                             Text="{Binding CurrentMovto.ProductoClave}" 
                                                 HorizontalAlignment="Stretch" 
                                                 VerticalAlignment="Center"
                                                 Margin="0,0,6,0"
                                                 IsReadOnly="False" 
                                                 IsHitTestVisible="True"
                                                 ForceCursor="True"
                                                 BorderThickness="0,0,0,2"
                                            BorderBrush="DarkGray"
                                            Background="#F9F9F9F9"
                                                 localCommon:InputBindingsManager.UpdatePropertySourceWhenEnterPressed="localConv:SfTextBoxExt2.Text"
                                                 cal:Message.Attach="[Event PreviewKeyDown] = [Action ProductoKeyDown($eventArgs)]"
                                            
                                                            Height="30"
                                                            SearchItemPath="Text"
                                                            SuggestionMode="Contains"
                                                            AutoCompleteMode="Suggest"
                                                            AutoCompleteSource="{Binding GlobalSession.ListadoAutoCompleteProd}" />


                            <TextBlock Style="{DynamicResource TextErrorStyleTemplate}"  Text="{Binding (Validation.Errors), Converter={localConv:ValidationErrorConverter}, ConverterParameter=0,  ElementName=P_productoclave}"  Margin="0,0,0,0"/>
                        </StackPanel>


                        <StackPanel MinWidth="50" Width="{Binding ElementName=MainPanel, Path=ActualWidth, Converter={localConv:MathConverter}, ConverterParameter=x/12.5}"  Height="85" Visibility="{cbind:Binding Path=CajasBotellasActive}" >
                            <Label  Style="{DynamicResource LabelFieldFormTemplate}" Margin="10,0,10,0"  Content="Cajas" />
                            <Syncfusion:DoubleTextBox x:Name="P_cajas" HorizontalAlignment="Stretch"  Margin="10,0,10,0" NumberGroupSeparator="," NumberDecimalDigits="0" NumberDecimalSeparator="." TextWrapping="Wrap" Text="DoubleTextBox" Value="{Binding Cajas}" VerticalAlignment="Top"  IsScrollingOnCircle="False" IsReadOnly="{Binding BIsReadOnly}" />
                            <TextBlock Style="{DynamicResource TextErrorStyleTemplate}"  Text="{Binding (Validation.Errors), Converter={localConv:ValidationErrorConverter}, ConverterParameter=0,  ElementName=P_cajas}"  Margin="0,0,0,0"/>
                        </StackPanel>

                        <StackPanel MinWidth="50" Width="{Binding ElementName=MainPanel, Path=ActualWidth, Converter={localConv:MathConverter}, ConverterParameter=1.6*x/12.5}"  Height="85"  >
                            <Label  Style="{DynamicResource LabelFieldFormTemplate}" Margin="10,0,10,0"  Content="Cantidad" />
                            <Syncfusion:DoubleTextBox x:Name="P_cantidad" HorizontalAlignment="Stretch"  Margin="10,0,10,0" NumberGroupSeparator="," NumberDecimalDigits="2" NumberDecimalSeparator="." TextWrapping="Wrap" Text="DoubleTextBox" Value="{Binding CurrentMovto.Cantidad}" VerticalAlignment="Top"  IsScrollingOnCircle="False" IsReadOnly="{Binding BIsReadOnly}" IsEnabled="{cbind:Binding CantidadEnabled}" 
                                                 ForceCursor="True" 
                                                 localCommon:InputBindingsManager.UpdatePropertySourceWhenEnterPressed="Syncfusion:DoubleTextBox.Value"
                                                 cal:Message.Attach="[Event PreviewKeyDown] = [Action CantidadKeyDown($eventArgs)]" />
                            <TextBlock Style="{DynamicResource TextErrorStyleTemplate}"  Text="{Binding (Validation.Errors), Converter={localConv:ValidationErrorConverter}, ConverterParameter=0,  ElementName=P_cantidad}"  Margin="0,0,0,0"/>
                        </StackPanel>



                        <StackPanel MinWidth="50" Width="{Binding ElementName=MainPanel, Path=ActualWidth, Converter={localConv:MathConverter}, ConverterParameter=0.6*x/12.5}"  Height="85"  >
                            <Label Margin="10,0,10,0"  Content=" " />
                            <Button  Margin="6" Padding="6"
                                            x:Name="SaveMovto" Content="Ok" IsEnabled="{cbind:Binding !Fnc_movto_prov_insert.HasErrors}" Foreground="WhiteSmoke"/>
                        </StackPanel>

                        <StackPanel MinWidth="50" Width="{Binding ElementName=MainPanel, Path=ActualWidth, Converter={localConv:MathConverter}, ConverterParameter=0.6*x/12.5}"  Height="85"  >
                            <Label Margin="10,0,10,0"  Content=" " />
                            <Button  Margin="6" Padding="6"
                                            x:Name="CancelMovto"
                                            Content="X" Visibility="{cbind:Binding Path=!BIsReadOnly}" Background="LightGray"/>
                        </StackPanel>


                        <StackPanel MinWidth="110" Width="{Binding ElementName=MainPanel, Path=ActualWidth, Converter={localConv:MathConverter}, ConverterParameter=5*x/12.5}"  Height="65"  >
                            <Label Margin="10,0,10,0"  Content=" " />
                            <TextBox x:Name="ProductoNombre" Text="{Binding CurrentMovto.DescripcionProductoMovto}" Margin="10,0,10,0" IsReadOnly="True"  Background="#F9F9F9F9"    />
                        </StackPanel>


                    </WrapPanel>


                    <WrapPanel Width="{Binding ElementName=MainPanel, Path=ActualWidth, Converter={localConv:MathConverter}, ConverterParameter=12.5*x/12.5}">

                        <StackPanel MinWidth="20" Width="{Binding ElementName=MainPanel, Path=ActualWidth, Converter={localConv:MathConverter}, ConverterParameter=1.20*x/12.5}"  Height="65"  >
                            <Label Margin="10,0,10,0"  Content=" " />
                            <Button  Margin="6" Padding="6" Content="Completar" cal:Message.Attach="[Event Click]=[Action Completar()]"  Foreground="WhiteSmoke"/>
                        </StackPanel>

                    </WrapPanel>

                </WrapPanel>
            </ScrollViewer>



        </StackPanel>
    </ScrollViewer>

</UserControl>
