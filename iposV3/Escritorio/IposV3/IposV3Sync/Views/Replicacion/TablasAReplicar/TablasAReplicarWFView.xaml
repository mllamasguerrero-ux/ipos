
<UserControl x:Class="IposV3Sync.Views.TablasAReplicarWFView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:cal="http://www.caliburnproject.org"
             xmlns:Syncfusion="http://schemas.syncfusion.com/wpf"
                xmlns:SfExt="clr-namespace:SyncfusionExt;assembly=UICommon"
            xmlns:local="clr-namespace:IposV3Sync"
            xmlns:localCont="clr-namespace:Controls;assembly=UICommon"
            xmlns:localConv="clr-namespace:Converters;assembly=UICommon"
              xmlns:cbind="clr-namespace:CalcBinding;assembly=CalcBinding"
             
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             xmlns:ac="clr-namespace:AdornedControl;assembly=AdornedControl"
             xmlns:mde="clr-namespace:MaterialDesignExtensions.Controls;assembly=MaterialDesignExtensions"
            xmlns:model="clr-namespace:MaterialDesignExtensions.Model;assembly=MaterialDesignExtensions"
             mc:Ignorable="d"
             Name="CurrentUserControl"
            Height="{Binding Source={x:Static SystemParameters.PrimaryScreenHeight}, Converter={localConv:WindowSizeConverter}, ConverterParameter='0.75'}" 
            Width="{Binding Source={x:Static SystemParameters.PrimaryScreenWidth}, Converter={localConv:WindowSizeConverter}, ConverterParameter='0.75'}"
             >

    <UserControl.Resources>

        <Style x:Key="customCellStyle" TargetType="Syncfusion:VirtualizingCellsControl">
            <Setter Property="cal:Message.Attach" Value="[Event MouseDoubleClick] = [Action SelectItemByCell($dataContext)]"/>
        </Style>

        <Style x:Key="filterControlStyle" TargetType="Syncfusion:GridFilterControl">
            <Setter Property="FilterMode" Value="AdvancedFilter" />
        </Style>


    </UserControl.Resources>

    <ScrollViewer x:Name="MainScrollViewer" HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Auto" >
        <StackPanel Name="ForePanel"  HorizontalAlignment="Stretch"  VerticalAlignment="Stretch"   >
            <localCont:MessageBoxV2 MessageToUser="{Binding MessageToUser}"  Width="10"  HorizontalAlignment="Right"/>



            <StackPanel HorizontalAlignment="Stretch" >
                <StackPanel MinWidth="150" Width="{Binding ElementName=MainPanel, Path=ActualWidth, Converter={localConv:MathConverter}, ConverterParameter=x}"    >
                    <TextBlock Style="{StaticResource MaterialDesignHeadline5TextBlock}">Configuracion de tablas de replicacion</TextBlock>
                </StackPanel>
                <StackPanel MinWidth="150" Width="{Binding ElementName=MainPanel, Path=ActualWidth, Converter={localConv:MathConverter}, ConverterParameter=x}"    >

                    <Button MaxWidth="120" Margin="6" Padding="6"
                            x:Name="StartSync" Content="Start sync"  Foreground="WhiteSmoke"/>
                </StackPanel>
                <mde:Stepper IsLinear="True" Layout="Horizontal"  ContinueNavigation="Stepper_ContinueNavigation" BackNavigation="Stepper_ContinueNavigation" >
                    <model:Step>
                        <model:Step.Header>
                            <model:StepTitleHeader FirstLevelTitle="Basico por grupo de tablas" />
                        </model:Step.Header>
                        <model:Step.Content>


                            <StackPanel  HorizontalAlignment="Stretch"  VerticalAlignment="Stretch"   >

                                <ScrollViewer x:Name="ScrollViewerWrap" HorizontalAlignment="Stretch" HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Auto" 
                       Height="{Binding ElementName=ForePanel, Path=ActualHeight, Converter={localConv:MathConverter}, ConverterParameter=8*x/60}" MinHeight="50" Margin="0,-30,0,0">
                                    <WrapPanel Name="MainPanel"  HorizontalAlignment="Stretch"  VerticalAlignment="Stretch" MinWidth="100" MinHeight="50" >

                                        <!--<StackPanel MinWidth="150" Width="{Binding ElementName=MainPanel, Path=ActualWidth, Converter={localConv:MathConverter}, ConverterParameter=3*x/12.5}"  Height="Auto"  >
                                            <Label  Style="{DynamicResource LabelPanelHeaderTemplate}" VerticalAlignment="Top" Margin="10,1,10,0">Palabras Claves:</Label>
                                            <TextBox x:Name="TSTPalabrasClave" Margin="10,0,10,3" TextWrapping="Wrap" VerticalAlignment="Top"  Height="25"  Text="{Binding KendoParams.GeneralFilter.Value}"
                         local:InputBindingsManager.UpdatePropertySourceWhenEnterPressed="TextBox.Text"
                          cal:Message.Attach="[Event KeyDown] = [Action TSTPalabrasClaveKeyDown($pressedKey)]"/>
                                        </StackPanel>


                                        <WrapPanel  MinWidth="150" Width="{Binding ElementName=MainPanel, Path=ActualWidth, Converter={localConv:MathConverter}, ConverterParameter=3*x/12.5}"   >
                                            <Button x:Name="TSBBuscar" VerticalAlignment="Top" Width="43"  Height="30" Margin="10,30,10,0" Style="{StaticResource MaterialDesignIconButton}">
                                                <StackPanel Orientation="Horizontal">
                                                    <materialDesign:PackIcon Kind="FileDocumentBoxSearchOutline"/>
                                                </StackPanel>
                                            </Button>
                                        </WrapPanel>-->
                                        <StackPanel MinWidth="110" Width="{Binding ElementName=MainPanel, Path=ActualWidth, Converter={localConv:MathConverter}, ConverterParameter=x}"  Height="65" HorizontalAlignment="Right"  >
                                            <mde:StepButtonBar Continue="Continuar" Cancel="Cancelar" />
                                        </StackPanel>

                                    </WrapPanel>
                                </ScrollViewer>

                                <ac:AdornedControl IsAdornerVisible="{Binding IsBusy}"
		        >
                                    <ac:AdornedControl.AdornerContent>
                                        <localCont:LoadingWait></localCont:LoadingWait>
                                    </ac:AdornedControl.AdornerContent>

                                    <Syncfusion:SfDataGrid x:Name="SfTableDataGridView" 
                                        ItemsSource="{Binding GroupItems}" 
                                        RowStyle="{StaticResource customCellStyle}"
                                        AllowFiltering="True"
                                        AllowEditing="True"
                                        FilterPopupStyle="{StaticResource filterControlStyle}"
                                        Margin="2,2,2,2"  AutoGenerateColumns="False" Background="#FFFFFFFF" IsReadOnly="False"  RowHeight="35" HorizontalAlignment="Left"   
                                        MinWidth="100" Width="{Binding ElementName=MainScrollViewer, Path=ActualWidth, Converter={localConv:MathConverter}, ConverterParameter=x}"
                                        Height="{Binding ElementName=ForePanel, Path=ActualHeight, Converter={localConv:MathConverter}, ConverterParameter=35*x/60}" MinHeight="150"  >
                                        <Syncfusion:SfDataGrid.Columns>


                                            <Syncfusion:GridCheckBoxColumn  MappingName="Replicar" HeaderText="asignado" ColumnSizer="SizeToHeader" AllowEditing="True" AllowFocus="True"  />

                                            <Syncfusion:GridTextColumn  MappingName="Clave" HeaderText="Clave" ColumnSizer="SizeToCells" MinimumWidth="150"/>

                                            <Syncfusion:GridTextColumn  MappingName="Nombre" HeaderText="Nombre" ColumnSizer="SizeToCells" MinimumWidth="150"/>


                                        </Syncfusion:SfDataGrid.Columns>
                                    </Syncfusion:SfDataGrid>
                                </ac:AdornedControl>

                            </StackPanel>



                        </model:Step.Content>
                    </model:Step>


                    <model:Step>
                        <model:Step.Header>
                            <model:StepTitleHeader FirstLevelTitle="Detallado" />
                        </model:Step.Header>
                        <model:Step.Content>


                            <StackPanel  HorizontalAlignment="Stretch"  VerticalAlignment="Stretch"   >

                                <ScrollViewer x:Name="ScrollViewerWrapDetalle" HorizontalAlignment="Stretch" HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Auto" 
                       Height="{Binding ElementName=ForePanel, Path=ActualHeight, Converter={localConv:MathConverter}, ConverterParameter=9*x/60}" MinHeight="50"  Margin="0,-30,0,0">
                                    <WrapPanel Name="MainPanelDetalle"  HorizontalAlignment="Stretch"  VerticalAlignment="Stretch" MinWidth="100" MinHeight="100" >



                                        <StackPanel MinWidth="110" Width="{Binding ElementName=MainPanel, Path=ActualWidth, Converter={localConv:MathConverter}, ConverterParameter=x}"  Height="65" HorizontalAlignment="Right"  >
                                            <mde:StepButtonBar Back="Atras" Continue="Guardar" Cancel="Cancelar" />
                                        </StackPanel>

                                    </WrapPanel>
                                </ScrollViewer>

                                <ac:AdornedControl IsAdornerVisible="{Binding IsBusy}"
		        >
                                    <ac:AdornedControl.AdornerContent>
                                        <localCont:LoadingWait></localCont:LoadingWait>
                                    </ac:AdornedControl.AdornerContent>

                                    <Syncfusion:SfDataGrid x:Name="SfTableDataGridView_Detalle" 
                                        ItemsSource="{Binding TablaItems}" 
                                        RowStyle="{StaticResource customCellStyle}"
                                        AllowFiltering="True"
                                        AllowEditing="True"
                                        FilterPopupStyle="{StaticResource filterControlStyle}"
                                        Margin="2,2,2,2"  AutoGenerateColumns="False" Background="#FFFFFFFF" IsReadOnly="False"  RowHeight="35" HorizontalAlignment="Left"   
                                        MinWidth="100" Width="{Binding ElementName=MainScrollViewer, Path=ActualWidth, Converter={localConv:MathConverter}, ConverterParameter=x}"
                                        Height="{Binding ElementName=ForePanel, Path=ActualHeight, Converter={localConv:MathConverter}, ConverterParameter=35*x/60}" MaxHeight="400"  >
                                        <Syncfusion:SfDataGrid.Columns>


                                            <Syncfusion:GridCheckBoxColumn  MappingName="Replicar" HeaderText="asignado" ColumnSizer="SizeToHeader" AllowEditing="True" AllowFocus="True"  />

                                            <Syncfusion:GridTextColumn  MappingName="Nombretabla" HeaderText="Nombre" ColumnSizer="SizeToCells"/>

                                            <Syncfusion:GridTextColumn  MappingName="Replcondinsert" HeaderText="Condicion insert" ColumnSizer="SizeToCells" MinimumWidth="50"/>

                                            <Syncfusion:GridTextColumn  MappingName="Replcondupdate" HeaderText="Condicion update" ColumnSizer="SizeToCells" MinimumWidth="50"/>

                                            <Syncfusion:GridTextColumn  MappingName="Replconddelete" HeaderText="Condicion delete" ColumnSizer="SizeToCells" MinimumWidth="50"/>


                                        </Syncfusion:SfDataGrid.Columns>
                                    </Syncfusion:SfDataGrid>
                                </ac:AdornedControl>

                            </StackPanel>

                        </model:Step.Content>
                    </model:Step>

                </mde:Stepper>
            </StackPanel>



        </StackPanel>
    </ScrollViewer>

</UserControl>
