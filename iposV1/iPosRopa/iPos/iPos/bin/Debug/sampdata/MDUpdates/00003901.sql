create or alter procedure GUIA_DELETE (
    GUIAID D_FK,
    CAJEROID D_FK)
returns (
    ERRORCODE type of D_ERRORCODE)
as
BEGIN

  -- FALTA COMPLETAR

   
   UPDATE DOCTO SET ESTADOGUIAID = 0, GUIAID = NULL
    WHERE ID IN (SELECT DOCTOID FROM GUIADETALLE WHERE GUIAID = :GUIAID)
    AND GUIAID = :GUIAID;


    DELETE FROM GUIADETALLE
    WHERE GUIAID = :GUIAID;

    DELETE FROM GUIA
    WHERE ID = :GUIAID;



   ERRORCODE = 0;
   SUSPEND;
END