CREATE OR ALTER TRIGGER DOCTOPAGOMOVIL_AI0 FOR DOCTOPAGOMOVIL
ACTIVE AFTER INSERT POSITION 0
AS
begin
  /* Trigger text */
  IF(NEW.estatus = 1) THEN
  BEGIN
    IF(NEW.tipopagoid = 5) THEN
    BEGIN
        UPDATE PAGOMOVIL SET APLICADO = APLICADO + NEW.importe WHERE ID = NEW.pagomovilid;
        UPDATE COBRANZAMOVIL SET SALDOMOVIL = SALDOMOVIL - NEW.IMPORTE, ABONOSMOVIL = ABONOSMOVIL + NEW.IMPORTE WHERE ID = NEW.cobranzaid;

    END
    else IF(NEW.TIPOPAGOID = 6) THEN   
    BEGIN
        UPDATE PAGOMOVIL SET APLICADO = APLICADO - NEW.importe WHERE ID = NEW.pagomovilid;
        UPDATE COBRANZAMOVIL SET SALDOMOVIL = SALDOMOVIL + NEW.IMPORTE, ABONOSMOVIL = ABONOSMOVIL - NEW.IMPORTE WHERE ID = NEW.cobranzaid;

    END
  END
end