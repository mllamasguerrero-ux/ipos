CREATE OR ALTER TRIGGER KITDEFINICION_AD0 FOR KITDEFINICION
ACTIVE AFTER DELETE POSITION 0
AS
/*declare variable PORCENTAJEIEPS D_PORCENTAJE;
declare variable PORCENTAJEIVA D_PORCENTAJE;
declare variable PORCENTAJEIMPUESTO D_PORCENTAJE;
declare variable TASAIVAID D_FK; */
declare variable ERRORCODE D_ERRORCODE;
begin
  /* Trigger text */


  SELECT ERRORCODE FROM KIT_ACTUALIZARIMPUESTOKIT (OLD.productokitid) INTO :ERRORCODE;

  /*SELECT PORCENTAJEIEPS, PORCENTAJEIVA, PORCENTAJEIMPUESTO,  TASAIVAID ,ERRORCODE
  FROM KIT_TOTALIZARIMPUESTOS(OLD.productokitid)
  INTO  :PORCENTAJEIEPS, :PORCENTAJEIVA, :PORCENTAJEIMPUESTO,  :TASAIVAID , :ERRORCODE;



  IF(:ERRORCODE = 0 ) THEN
  BEGIN

      UPDATE PRODUCTO SET TASAIEPS = :PORCENTAJEIEPS ,
                        TASAIVA = :PORCENTAJEIVA  ,
                        TASAIVAID = :TASAIVAID ,
                        TASAIMPUESTO = :PORCENTAJEIEPS
                WHERE ID = OLD.productokitid;
  END*/

end