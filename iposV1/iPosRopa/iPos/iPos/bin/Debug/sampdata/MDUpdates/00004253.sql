create or alter procedure DOCTO_DELETE (
    DOCTOID D_PK)
returns (
    ERRORCODE D_ERRORCODE)
as
declare variable ESTATUSDOCTOID D_FK;
declare variable TIPODOCTOID D_FK;
BEGIN
   SELECT ESTATUSDOCTOID, TIPODOCTOID
   FROM DOCTO
   WHERE ID = :DOCTOID
   INTO :ESTATUSDOCTOID, :TIPODOCTOID;

   IF (:ESTATUSDOCTOID <> 0) THEN
   BEGIN
      ERRORCODE = 1005;
      SUSPEND;
      EXIT;
   END


   DELETE FROM MOVTOGASTOSADIC
   WHERE DOCTOID = :DOCTOID;


   DELETE FROM MOVTO
   WHERE DOCTOID = :DOCTOID;

   --GASTOS
   IF(COALESCE(:TIPODOCTOID,0) = 63) THEN
   BEGIN
   
    DELETE FROM MOVTOGASTO
    WHERE DOCTOID = :DOCTOID;
   END

   DELETE FROM DOCTO
   WHERE ID = :DOCTOID;
   
   SUSPEND;
   
   WHEN ANY DO
   BEGIN
      ERRORCODE = 1006;
      SUSPEND;
   END
END