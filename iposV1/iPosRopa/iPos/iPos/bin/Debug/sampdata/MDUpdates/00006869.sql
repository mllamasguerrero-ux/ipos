EXECUTE block
AS
DECLARE ESTADOID D_FK;   
DECLARE CLAVEESTADO D_CLAVE;
DECLARE ACRONIMO D_STDTEXT_SHORT;
BEGIN

   UPDATE ESTADO SET ACTIVO = 'N';

   for 
    SELECT 'AGUASCALIENTES' CLAVEESTADO, 'AGU' ACRONIMO FROM  RDB$DATABASE UNION
    SELECT 'BAJA CALIFORNIA' CLAVEESTADO, 'BCN' ACRONIMO FROM  RDB$DATABASE UNION
    SELECT 'BAJA CALIFORNIA SUR' CLAVEESTADO, 'BCS' ACRONIMO FROM  RDB$DATABASE UNION
    SELECT 'CAMPECHE' CLAVEESTADO, 'CAM' ACRONIMO FROM  RDB$DATABASE UNION
    SELECT 'COAHUILA' CLAVEESTADO, 'COA' ACRONIMO FROM  RDB$DATABASE UNION
    SELECT 'COLIMA' CLAVEESTADO, 'COL' ACRONIMO FROM  RDB$DATABASE UNION
    SELECT 'CHIHUAHUA' CLAVEESTADO, 'CHH' ACRONIMO FROM  RDB$DATABASE UNION
    SELECT 'CHIAPAS' CLAVEESTADO, 'CHP' ACRONIMO FROM  RDB$DATABASE UNION
    SELECT 'CIUDAD DE MEXICO' CLAVEESTADO, 'DIF' ACRONIMO FROM  RDB$DATABASE UNION
    SELECT 'DURANGO' CLAVEESTADO, 'DUR' ACRONIMO FROM  RDB$DATABASE UNION
    SELECT 'GUANAJUATO' CLAVEESTADO, 'GUA' ACRONIMO FROM  RDB$DATABASE UNION
    SELECT 'GUERRERO' CLAVEESTADO, 'GRO' ACRONIMO FROM  RDB$DATABASE UNION
    SELECT 'HIDALGO' CLAVEESTADO, 'HID' ACRONIMO FROM  RDB$DATABASE UNION
    SELECT 'JALISCO' CLAVEESTADO, 'JAL' ACRONIMO FROM  RDB$DATABASE UNION
    SELECT 'MEXICO' CLAVEESTADO, 'MEX' ACRONIMO FROM  RDB$DATABASE UNION
    SELECT 'MICHOACAN' CLAVEESTADO, 'MIC' ACRONIMO FROM  RDB$DATABASE UNION
    SELECT 'MORELOS' CLAVEESTADO, 'MOR' ACRONIMO FROM  RDB$DATABASE UNION
    SELECT 'NAYARIT' CLAVEESTADO, 'NAY' ACRONIMO FROM  RDB$DATABASE UNION
    SELECT 'NUEVO LEON' CLAVEESTADO, 'NLE' ACRONIMO FROM  RDB$DATABASE UNION
    SELECT 'OAXACA' CLAVEESTADO, 'OAX' ACRONIMO FROM  RDB$DATABASE UNION
    SELECT 'PUEBLA' CLAVEESTADO, 'PUE' ACRONIMO FROM  RDB$DATABASE UNION
    SELECT 'QUERETARO' CLAVEESTADO, 'QUE' ACRONIMO FROM  RDB$DATABASE UNION
    SELECT 'QUINTANA ROO' CLAVEESTADO, 'ROO' ACRONIMO FROM  RDB$DATABASE UNION
    SELECT 'SINALOA' CLAVEESTADO, 'SIN' ACRONIMO FROM  RDB$DATABASE UNION
    SELECT 'SAN LUIS POTOSI' CLAVEESTADO, 'SLP' ACRONIMO FROM  RDB$DATABASE UNION
    SELECT 'SONORA' CLAVEESTADO, 'SON' ACRONIMO FROM  RDB$DATABASE UNION
    SELECT 'TABASCO' CLAVEESTADO, 'TAB' ACRONIMO FROM  RDB$DATABASE UNION
    SELECT 'TAMAULIPAS' CLAVEESTADO, 'TAM' ACRONIMO FROM  RDB$DATABASE UNION
    SELECT 'TLAXCALA' CLAVEESTADO, 'TLA' ACRONIMO FROM  RDB$DATABASE UNION
    SELECT 'VERACRUZ' CLAVEESTADO, 'VER' ACRONIMO FROM  RDB$DATABASE UNION
    SELECT 'YUCATAN' CLAVEESTADO, 'YUC' ACRONIMO FROM  RDB$DATABASE UNION
    SELECT 'ZACATECAS' CLAVEESTADO, 'ZAC' ACRONIMO FROM  RDB$DATABASE     
    into :CLAVEESTADO, :ACRONIMO
  do
  begin
    ESTADOID = 0;
    SELECT ID FROM estado WHERE CLAVE = :CLAVEESTADO  INTO :ESTADOID;
    IF(COALESCE(:ESTADOID, 0) > 0 ) THEN
    BEGIN
         UPDATE ESTADO SET ACTIVO = 'S' WHERE ID = :ESTADOID;
    END
    ELSE
    BEGIN
        INSERT INTO ESTADO(ACTIVO, CLAVE, NOMBRE, ACRONIMO)
        VALUES('S', :CLAVEESTADO, :CLAVEESTADO,    :ACRONIMO);
    END
  end

  DELETE FROM ESTADO WHERE ACTIVO = 'N';
END;