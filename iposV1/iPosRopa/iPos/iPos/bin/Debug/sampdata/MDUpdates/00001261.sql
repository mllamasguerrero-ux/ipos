create or alter procedure POST_INVENTARIO_INICIAL
returns (
    ERRORCODE D_ERRORCODE)
as
declare variable PRODUCTOID D_FK;
declare variable CANTIDAD D_CANTIDAD;
BEGIN
   UPDATE PRODUCTO SET EXISTENCIA = 0;

   FOR SELECT PRODUCTOID, SUM(CANTIDAD)
   FROM INVENTARIO
   GROUP BY PRODUCTOID
   ORDER BY PRODUCTOID
   INTO :PRODUCTOID, :CANTIDAD DO
   BEGIN
      UPDATE PRODUCTO
      SET EXISTENCIA = :CANTIDAD , EXISTENCIAREMISIONADO = :CANTIDAD
      WHERE ID = :PRODUCTOID;
   END

   ERRORCODE = 0;
   SUSPEND;

   WHEN ANY DO
   BEGIN
      ERRORCODE = 1016;
      SUSPEND;
   END 
END