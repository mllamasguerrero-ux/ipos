CREATE OR ALTER TRIGGER CONTRARECIBOHDR_BU_1 FOR CONTRARECIBOHDR
ACTIVE BEFORE UPDATE POSITION 1
AS
    DECLARE VARIABLE FOLIO D_DOCTOFOLIO; 
    declare variable SUCURSALID D_FK;
BEGIN
    IF ((OLD.ESTATUSID = 0) AND (NEW.ESTATUSID = 1)) THEN
    BEGIN
        IF ( (NEW.FOLIO IS NULL)) THEN
        BEGIN          
            SELECT FIRST 1 PARAMETRO.sucursalid FROM PARAMETRO INTO :sucursalid;
            SELECT  FOLIO
            FROM GET_FOLIO(:SUCURSALID, 1, 600)
            INTO  :FOLIO;

            NEW.FOLIO = :FOLIO;
        END
    END
END