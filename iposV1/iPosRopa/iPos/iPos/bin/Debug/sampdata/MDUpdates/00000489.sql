CREATE OR ALTER TRIGGER PRODUCTO_BU30 FOR PRODUCTO
ACTIVE BEFORE INSERT OR UPDATE POSITION 30
AS
declare variable CUENTA  INTEGER ;
BEGIN

IF(     COALESCE(NEW.PRODUCTOPADRE,0) <> 0 AND NEW.ESSUBPRODUCTO = 'S' )   THEN
BEGIN

           
   SELECT FIRST 1 UNIDAD, U_EMPAQUE, PZACAJA FROM PRODUCTO
   WHERE ID = NEW.PRODUCTOPADRE INTO
   NEW.unidad,  NEW.u_empaque,  NEW.PZACAJA;


  IF (NEW.TOMARPRECIOPADRE <> OLD.TOMARPRECIOPADRE AND NEW.TOMARPRECIOPADRE = 'S' ) THEN
  BEGIN
          SELECT FIRST 1 PRECIO1,PRECIO2,PRECIO3,PRECIO4,PRECIO5,LIMITEPRECIO2, PRECIOMAXIMOPUBLICO FROM PRODUCTO
          WHERE ID = NEW.PRODUCTOPADRE INTO
          NEW.PRECIO1,NEW.PRECIO2,NEW.PRECIO3,NEW.PRECIO4,NEW.PRECIO5, NEW.LIMITEPRECIO2, NEW.PRECIOMAXIMOPUBLICO;
   END

   
  IF (NEW.TOMARCOMISIONPADRE <> OLD.TOMARCOMISIONPADRE AND NEW.TOMARCOMISIONPADRE = 'S') THEN
  BEGIN
          SELECT FIRST 1 COMISION FROM PRODUCTO
          WHERE ID = NEW.PRODUCTOPADRE INTO
          NEW.COMISION;
   END

   
  IF (NEW.TOMAROFERTAPADRE <> OLD.TOMAROFERTAPADRE AND NEW.TOMAROFERTAPADRE = 'S') THEN
  BEGIN
          SELECT FIRST 1 OFERTA FROM PRODUCTO
          WHERE ID = NEW.PRODUCTOPADRE INTO
          NEW.OFERTA;
   END

 END



END