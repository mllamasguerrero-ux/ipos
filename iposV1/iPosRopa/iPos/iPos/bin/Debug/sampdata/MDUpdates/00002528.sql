CREATE OR ALTER TRIGGER CONTRARECIBODTL_UPDTOTALES FOR CONTRARECIBODTL
ACTIVE AFTER UPDATE POSITION 0
AS      
   DECLARE VARIABLE ERRORCODE D_ERRORCODE;
begin
  /* Trigger text */
  
   IF ( (COALESCE(OLD.TOTAL,0) <> COALESCE(NEW.TOTAL,0)) or
        (COALESCE(OLD.SALDO,0) <> COALESCE(NEW.SALDO,0)) or
        (COALESCE(OLD.ABONO,0) <> COALESCE(NEW.ABONO,0))
      ) THEN
    BEGIN
         SELECT ERRORCODE
         FROM CONTRARECIBO_ACUMULAR_TOTALES( NEW.CONTRARECIBOID ) INTO :ERRORCODE;
    END
end