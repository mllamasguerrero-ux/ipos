create or alter procedure CONTRARECIBOHEADER_DELETE (
    CONTRARECIBOID type of D_FK)
returns (
    ERRORCODE type of D_ERRORCODE)
as
declare variable ESTATUSID D_FK;
BEGIN


    
   IF ((:CONTRARECIBOID IS NULL) OR (:CONTRARECIBOID = 0)) THEN
   BEGIN
      ERRORCODE = 1002;
   END

    SELECT ESTATUSID FROM CONTRARECIBOHDR WHERE ID = :CONTRARECIBOID INTO :ESTATUSID;


    IF(COALESCE(:ESTATUSID,-1) <> 0) THEN
    BEGIN
              errorcode = 1002;
              SUSPEND;
              EXIT;

    END

    
    DELETE FROM CONTRARECIBODTL WHERE CONTRARECIBOID = :CONTRARECIBOID;

    DELETE FROM CONTRARECIBOHDR WHERE ID = :CONTRARECIBOID;


   SUSPEND;
END