create or alter procedure SURTIDO_CAMBIAR_LOTE_FINISH (
    FIRSTMOVTOID D_FK)
returns (
    ERRORCODE D_ERRORCODE)
as
declare variable PRODUCTOID D_FK;
declare variable DOCTOID D_FK;
declare variable PRECIO D_PRECIO;
BEGIN

   SELECT MOVTO.PRODUCTOID, MOVTO.DOCTOID, MOVTO.PRECIO
   FROM MOVTO
    LEFT JOIN DOCTO ON DOCTO.ID = MOVTO.DOCTOID
   WHERE MOVTO.ID = :FIRSTMOVTOID
   INTO :PRODUCTOID, :DOCTOID, :PRECIO;


   UPDATE MOVTO
   SET ESTATUSMOVTOID = 1
   WHERE DOCTOID = :DOCTOID AND PRODUCTOID = :PRODUCTOID AND PRECIO = :PRECIO;




   ERRORCODE = 0;
   SUSPEND;
         /*
   WHEN ANY DO
   BEGIN
      ERRORCODE = 1004;
      SUSPEND;
   END */
END