CREATE OR ALTER TRIGGER TASAIVA_BI FOR TASAIVA
ACTIVE BEFORE INSERT POSITION 10
AS
declare variable NEXTID D_FK;
BEGIN
  IF ((NEW.ID IS NULL) OR (NEW.ID = 0)) THEN
   BEGIN
      SELECT MAX(ID) FROM TASAIVA INTO :NEXTID;
      NEW.ID = COALESCE(:NEXTID,0) +  1;
   END
    
  IF (NEW.ACTIVO IS NULL) THEN
    NEW.ACTIVO = 'S';

  IF (NEW.CREADO IS NULL) THEN
    NEW.CREADO = CURRENT_TIMESTAMP;
    
  IF (NEW.MODIFICADO IS NULL) THEN
    NEW.MODIFICADO = CURRENT_TIMESTAMP;
END
