create or alter procedure DOCTO_DELETE (
    DOCTOID D_PK)
returns (
    ERRORCODE D_ERRORCODE)
as
declare variable ESTATUSDOCTOID D_FK;
BEGIN
   SELECT ESTATUSDOCTOID FROM DOCTO
   WHERE ID = :DOCTOID
   INTO :ESTATUSDOCTOID;

   IF (:ESTATUSDOCTOID <> 0) THEN
   BEGIN
      ERRORCODE = 1005;
      SUSPEND;
      EXIT;
   END
                     /*
   DELETE FROM DOCTOPAGO
   WHERE DOCTOID = :DOCTOID;

   DELETE FROM KARDEX
   WHERE DOCTOID = :DOCTOID;  */

   DELETE FROM MOVTO
   WHERE DOCTOID = :DOCTOID;

   DELETE FROM DOCTO
   WHERE ID = :DOCTOID;
   
   SUSPEND;
   
   WHEN ANY DO
   BEGIN
      ERRORCODE = 1006;
      SUSPEND;
   END
END