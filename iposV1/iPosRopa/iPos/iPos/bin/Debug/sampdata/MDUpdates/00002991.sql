CREATE OR ALTER TRIGGER DOCTOPAGO_CORTEUPD_AI100 FOR DOCTOPAGO
ACTIVE AFTER INSERT POSITION 100
AS  
declare variable ERRORCODE D_ERRORCODE; 
declare variable MANEJARETIRODECAJA D_BOOLCN;
begin
  /* Trigger text */
      SELECT FIRST 1 PARAMETRO.manejarretirodecaja FROM PARAMETRO INTO :MANEJARETIRODECAJA;
      IF(COALESCE(:manejaretirodecaja, 'N') = 'S' and COALESCE(NEW.CORTEID,0) <> 0  AND COALESCE(NEW.FORMAPAGOID,0) IN (1,3,5)) THEN
      BEGIN
     
        SELECT ERRORCODE FROM CORTE_TOTALES_PORID( NEW.CORTEID )
        INTO :ERRORCODE;
      END
end