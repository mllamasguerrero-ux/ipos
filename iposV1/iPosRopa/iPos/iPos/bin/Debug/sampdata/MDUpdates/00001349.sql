CREATE OR ALTER TRIGGER MOVTO_AI_1 FOR MOVTO
ACTIVE AFTER INSERT POSITION 10
AS
    DECLARE VARIABLE ERRORCODE D_ERRORCODE;
BEGIN
    IF (NOT ((NEW.TOTAL IS NULL) OR (NEW.TOTAL = 0))) THEN
    BEGIN
        SELECT ERRORCODE
        FROM DOCTO_ACUMULAR_TOTALES (
           NEW.DOCTOID,
           NEW.IMPORTE,
           NEW.SUBTOTAL,
           NEW.IVA,
           NEW.TOTAL  ,
           NEW.MONEDEROABONO,
           NEW.ISRRETENIDO,
           NEW.IVARETENIDO,
           NEW.IEPS,
           NEW.IMPUESTO
        ) INTO :ERRORCODE;
    END
END