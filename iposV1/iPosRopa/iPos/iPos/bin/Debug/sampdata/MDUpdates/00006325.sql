create or alter procedure SURTIDOPREV_ASIGNARESTADO (
    DOCTOID D_FK,
    ESTADOSURTIDOID D_FK,
    PERSONAIDSURTIDO D_FK)
returns (
    ERRORCODE D_ERRORCODE)
as
BEGIN


   UPDATE DOCTO
   SET  ESTADOSURTIDOID = :ESTADOSURTIDOID  ,
   PERSONAIDSURTIDO  = CASE WHEN :ESTADOSURTIDOID = 1 THEN :PERSONAIDSURTIDO ELSE NULL END
   WHERE ID = :DOCTOID;





   ERRORCODE = 0;
   SUSPEND;
         /*
   WHEN ANY DO
   BEGIN
      ERRORCODE = 1004;
      SUSPEND;
   END */
END