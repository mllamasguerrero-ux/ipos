<?xml version="1.0" encoding="utf-8"?>
<Report ScriptLanguage="CSharp" ReportInfo.Created="03/04/2014 11:45:50" ReportInfo.Modified="04/27/2018 06:27:36" ReportInfo.CreatorVersion="2013.3.2.0">
  <ScriptText>using System;
using System.Collections;
using System.Collections.Generic;
using System.ComponentModel;
using System.Windows.Forms;
using System.Drawing;
using System.Data;
using FastReport;
using FastReport.Data;
using FastReport.Dialog;
using FastReport.Barcode;
using FastReport.Table;
using FastReport.Utils;

namespace FastReport
{
  public class ReportScript
  {        
           
  }
}
</ScriptText>
  <Dictionary>
    <FirebirdDataConnection Name="Connection" ConnectionString="rijcmlqDEsChHWgW5OFiwSyA3zls2mCAWDWIhtE3dZ3WRoD3RGa4fuV4MzKWm/7hfiVWbDFvOZVx8SOHX0gb5rmLrybnY7iiclF/2nv5td1+ndGPC06HQTgDvuVUG6HniOtLf5uFTHeaaLLl6lH2IxXeuHQqiqyvu9HY0gWQpVaZYGFQTQ=">
      <TableDataSource Name="Table" DataType="System.Int32" Enabled="true" SelectCommand="select&#13;&#10;    f.factura,&#13;&#10;    f.fecharecepcion,&#13;&#10;    f.fechafactura,&#13;&#10;    f.proveedorid,&#13;&#10;    f.suma,&#13;&#10;    f.iva,&#13;&#10;    f.total,&#13;&#10;    f.provisionada,&#13;&#10;    p.clave proveedorclave,&#13;&#10;    p.nombre proveedornombre,&#13;&#10;    sum(coalesce(d.total,0)) sumacompras,&#13;&#10;    coalesce(f.total,0) -  sum(coalesce(d.total,0))  diferencia&#13;&#10;    from facturaoriginalcompra f&#13;&#10;    left join docto d on f.factura = d.referencia and f.proveedorid = d.personaid and d.estatusdoctoid = 1 and d.tipodoctoid in (11,1011)&#13;&#10;    left join persona p on p.id = f.proveedorid&#13;&#10;    where ( (f.fechafactura &gt;= @fechaini and f.fechafactura &lt;= @fechafin ) or @porfecha &lt;&gt; 'S')&#13;&#10;    and (f.proveedorid = @personaid OR @personaid = 0)&#13;&#10;  &#13;&#10;&#13;&#10;    group by &#13;&#10;    f.factura,&#13;&#10;    f.fecharecepcion,&#13;&#10;    f.fechafactura,&#13;&#10;    f.proveedorid,&#13;&#10;    f.suma,&#13;&#10;    f.iva,&#13;&#10;    f.total,&#13;&#10;    f.provisionada,&#13;&#10;    p.clave,&#13;&#10;    p.nombre&#13;&#10;&#13;&#10;having coalesce(f.total,0) -  sum(coalesce(d.total,0)) &lt;&gt; 0">
        <Column Name="TOTAL" DataType="System.Decimal"/>
        <Column Name="FACTURA" DataType="System.String"/>
        <Column Name="FECHARECEPCION" DataType="System.DateTime"/>
        <Column Name="FECHAFACTURA" DataType="System.DateTime"/>
        <Column Name="PROVEEDORID" DataType="System.Int64"/>
        <Column Name="SUMA" DataType="System.Decimal"/>
        <Column Name="IVA" DataType="System.Decimal"/>
        <Column Name="PROVISIONADA" DataType="System.String"/>
        <Column Name="PROVEEDORCLAVE" DataType="System.String"/>
        <Column Name="PROVEEDORNOMBRE" DataType="System.String"/>
        <Column Name="SUMACOMPRAS" DataType="System.Decimal"/>
        <Column Name="DIFERENCIA" DataType="System.Decimal"/>
        <CommandParameter Name="personaid" DataType="1" Expression="[personaid]" DefaultValue="0"/>
        <CommandParameter Name="fechaini" DataType="5" Expression="[fechaini]" DefaultValue="01/01/2001"/>
        <CommandParameter Name="fechafin" DataType="5" Expression="[fechafin]" DefaultValue="01/01/2021"/>
        <CommandParameter Name="porfecha" DataType="16" Expression="[porfecha]" DefaultValue="S"/>
      </TableDataSource>
      <TableDataSource Name="Table1" Alias="Empresa" DataType="System.Int32" Enabled="true" SelectCommand="select &#13;&#10;nombre,&#13;&#10;calle,&#13;&#10;numeroexterior,&#13;&#10;numerointerior,&#13;&#10;colonia,&#13;&#10;localidad,&#13;&#10;estado,&#13;&#10;cp,&#13;&#10;telefono,&#13;&#10;rfc,&#13;&#10;correoe&#13;&#10;&#13;&#10;from parametro;">
        <Column Name="NOMBRE" DataType="System.String"/>
        <Column Name="CALLE" DataType="System.String"/>
        <Column Name="NUMEROEXTERIOR" DataType="System.String"/>
        <Column Name="NUMEROINTERIOR" DataType="System.String"/>
        <Column Name="COLONIA" DataType="System.String"/>
        <Column Name="LOCALIDAD" DataType="System.String"/>
        <Column Name="ESTADO" DataType="System.String"/>
        <Column Name="CP" DataType="System.String"/>
        <Column Name="TELEFONO" DataType="System.String"/>
        <Column Name="RFC" DataType="System.String"/>
        <Column Name="CORREOE" DataType="System.String"/>
      </TableDataSource>
    </FirebirdDataConnection>    <Parameter Name="US_ID" DataType="System.Decimal"/>    <Parameter Name="US_NAME" DataType="System.String"/>
    <Parameter Name="personaid" DataType="System.Int64"/>
    <Parameter Name="fechaini" DataType="System.DateTime"/>
    <Parameter Name="fechafin" DataType="System.DateTime"/>
    <Parameter Name="porfecha" DataType="System.String"/>
    <Parameter Name="persona" DataType="System.String"/>
  </Dictionary>
  <ReportPage Name="Page1" Landscape="true" PaperWidth="320" PaperHeight="210" FirstPageSource="15" OtherPagesSource="15">
    <ReportTitleBand Name="ReportTitle1" Width="1134" Height="141.75">
      <TextObject Name="Text27" Left="113.4" Width="425.25" Height="18.9" Text="Facturas de compras por sucursal con diferencias" Font="Arial, 12pt, style=Bold"/>
      <TextObject Name="Text24" Left="708.75" Top="37.8" Width="103.95" Height="18.9" Text="[Date]" Format="Date" Format.Format="d" Font="Arial, 9pt"/>
      <TextObject Name="Text38" Left="113.4" Top="28.35" Width="425.25" Height="18.9" Text="Datos de la empresa:" Font="Arial, 11pt, style=Bold"/>
      <TextObject Name="Text39" Left="113.4" Top="47.25" Width="425.25" Height="18.9" Text="[Empresa.NOMBRE]" Font="Arial, 8pt"/>
      <TextObject Name="Text48" Left="18.9" Top="47.25" Width="94.5" Height="18.9" Text="Nombre:" Font="Arial, 10pt, style=Bold"/>
      <TextObject Name="Text51" Left="463.05" Top="113.4" Width="85.05" Height="18.9" Text="Fecha fin:" Font="Arial, 10pt, style=Bold"/>
      <TextObject Name="Text20" Left="122.85" Top="113.4" Width="103.95" Height="18.9" Text="[fechaini]" Format="Date" Format.Format="d" Font="Arial, 9pt"/>
      <TextObject Name="Text21" Left="548.1" Top="113.4" Width="94.5" Height="18.9" Text="[fechafin]" Format="Date" Format.Format="d" Font="Arial, 9pt"/>
      <TextObject Name="Text50" Left="9.45" Top="113.4" Width="103.95" Height="18.9" Text="Fecha inicio:" Font="Arial, 10pt, style=Bold"/>
      <TextObject Name="Text57" Left="9.45" Top="85.05" Width="103.95" Height="18.9" Text="Proveedor" Font="Arial, 10pt, style=Bold"/>
      <TextObject Name="Text4" Left="122.85" Top="85.05" Width="311.85" Height="18.9" Text="[persona]"/>
    </ReportTitleBand>
    <PageHeaderBand Name="PageHeader1" Top="145.75" Width="1134" Height="18.9">
      <TextObject Name="Text2" Left="9.45" Width="94.5" Height="18.9" Text="FACTURA" Font="Arial, 8pt, style=Bold"/>
      <TextObject Name="Text5" Left="103.95" Width="94.5" Height="18.9" Text="FECHA FACTURA" Font="Arial, 8pt, style=Bold"/>
      <TextObject Name="Text7" Left="198.45" Width="94.5" Height="18.9" Text="FECHA RECEPCION" Font="Arial, 8pt, style=Bold"/>
      <TextObject Name="Text9" Left="292.95" Width="94.5" Height="18.9" Text="PROVEEDOR CLAVE" Font="Arial, 8pt, style=Bold"/>
      <TextObject Name="Text11" Left="387.45" Width="198.45" Height="18.9" Text="PROVEEDOR NOMBRE" Font="Arial, 8pt, style=Bold"/>
      <TextObject Name="Text13" Left="585.9" Width="85.05" Height="18.9" Text="SUMA" Font="Arial, 8pt, style=Bold"/>
      <TextObject Name="Text15" Left="670.95" Width="75.6" Height="18.9" Text="IVA" Font="Arial, 8pt, style=Bold"/>
      <TextObject Name="Text17" Left="746.55" Width="85.05" Height="18.9" Text="TOTAL" Font="Arial, 8pt, style=Bold"/>
      <TextObject Name="Text23" Left="916.65" Width="85.05" Height="18.9" Text="DIFERENCIA" Font="Arial, 8pt, style=Bold"/>
      <TextObject Name="Text19" Left="831.6" Width="85.05" Height="18.9" Text="SUMA COMPRAS" Font="Arial, 8pt, style=Bold"/>
      <TextObject Name="Text26" Left="1001.7" Width="94.5" Height="18.9" Text="PROVISIONADA" Font="Arial, 8pt, style=Bold"/>
    </PageHeaderBand>
    <DataBand Name="Data1" Top="168.65" Width="1134" Height="18.9" CanGrow="true" DataSource="Table">
      <TextObject Name="Text1" Left="9.45" Width="94.5" Height="18.9" Text="[Table.FACTURA]" Font="Arial, 8pt"/>
      <TextObject Name="Text3" Left="103.95" Width="94.5" Height="18.9" Text="[Table.FECHAFACTURA]" Format="Date" Format.Format="d" Font="Arial, 8pt"/>
      <TextObject Name="Text6" Left="198.45" Width="94.5" Height="18.9" Text="[Table.FECHARECEPCION]" Format="Date" Format.Format="d" Font="Arial, 8pt"/>
      <TextObject Name="Text8" Left="292.95" Width="94.5" Height="18.9" Text="[Table.PROVEEDORCLAVE]" Font="Arial, 8pt"/>
      <TextObject Name="Text10" Left="387.45" Width="198.45" Height="18.9" Text="[Table.PROVEEDORNOMBRE]" Font="Arial, 8pt"/>
      <TextObject Name="Text12" Left="585.9" Width="85.05" Height="18.9" Text="[Table.SUMA]" Format="Currency" Format.UseLocale="true" HorzAlign="Right" WordWrap="false" Font="Arial, 8pt" Trimming="EllipsisCharacter"/>
      <TextObject Name="Text14" Left="670.95" Width="75.6" Height="18.9" Text="[Table.IVA]" Format="Currency" Format.UseLocale="true" HorzAlign="Right" WordWrap="false" Font="Arial, 8pt" Trimming="EllipsisCharacter"/>
      <TextObject Name="Text16" Left="746.55" Width="85.05" Height="18.9" Text="[Table.TOTAL]" Format="Currency" Format.UseLocale="true" HorzAlign="Right" WordWrap="false" Font="Arial, 8pt" Trimming="EllipsisCharacter"/>
      <TextObject Name="Text22" Left="916.65" Width="85.05" Height="18.9" Text="[Table.DIFERENCIA]" Format="Currency" Format.UseLocale="true" HorzAlign="Right" WordWrap="false" Font="Arial, 8pt" Trimming="EllipsisCharacter"/>
      <TextObject Name="Text18" Left="831.6" Width="85.05" Height="18.9" Text="[Table.SUMACOMPRAS]" Format="Currency" Format.UseLocale="true" HorzAlign="Right" WordWrap="false" Font="Arial, 8pt" Trimming="EllipsisCharacter"/>
      <TextObject Name="Text25" Left="1001.7" Width="94.5" Height="18.9" Text="[Table.PROVISIONADA]" Font="Arial, 8pt"/>
    </DataBand>
    <PageFooterBand Name="PageFooter1" Top="191.55" Width="1134" Height="18.9"> <TextObject Name="TextFooterGeneral2" Left="151.2" Width="66.15" Height="18.9" PrintOn="LastPage, OddPages, EvenPages, RepeatedBand, SinglePage" Text="[Date]" Format="Date" Format.Format="d" Font="Arial, 8pt, style=Bold"/> <TextObject Name="TextFooterGeneral3" Left="217.35" Width="151.2" Height="18.9" CanShrink="true" PrintOn="LastPage, OddPages, EvenPages, RepeatedBand, SinglePage" CanBreak="false" Text="[Date]" Format="Time" Format.Format="T" WordWrap="false" Font="Arial, 8pt, style=Bold"/> <TextObject Name="TextFooterGeneral1" Left="9.45" Width="141.75" Height="18.9" CanShrink="true" CanBreak="false" Text="Power by I-POS" HorzAlign="Center" WordWrap="false" Font="Arial, 8pt, style=Bold"/> <TextObject Name="TextFooterGeneral4" Left="368.55" Width="94.5" Height="18.9" Text="[US_NAME]" Font="Arial, 8pt, style=Bold"/> </PageFooterBand>
  </ReportPage>
</Report>
